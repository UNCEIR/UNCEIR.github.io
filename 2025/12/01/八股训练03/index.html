
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <title>八股训练03 | UNCEIR的个人博客</title>
    <meta name="author" content="David Huang" />
    <meta name="description" content="广东工业大学信息管理与信息系统专业的一名大三学生，未来想从事后端开发，请多指教。" />
    <meta name="keywords" content="" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="/images/avatar.jpg" />
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />

<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>UNCEIR的个人博客</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;UNCEIR的个人博客</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1>八股训练03</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2025/12/1
        </span>
        
        
    </div>
    
    <div class="content" v-pre>
        <h3 id="第一部分：Java基础与框架"><a href="#第一部分：Java基础与框架" class="headerlink" title="第一部分：Java基础与框架"></a>第一部分：Java基础与框架</h3><h4 id="1-Java基础数据类型有几种？能说一下吗？"><a href="#1-Java基础数据类型有几种？能说一下吗？" class="headerlink" title="1. Java基础数据类型有几种？能说一下吗？"></a>1. Java基础数据类型有几种？能说一下吗？</h4><p>Java有 <strong>8种</strong> 基本数据类型，可以分为四类：</p>
<ul>
<li><strong>整数型</strong>：<code>byte</code> (1字节), <code>short</code> (2字节), <code>int</code> (4字节), <code>long</code> (8字节)</li>
<li><strong>浮点型</strong>：<code>float</code> (4字节), <code>double</code> (8字节)</li>
<li><strong>字符型</strong>：<code>char</code> (2字节，存储Unicode字符)</li>
<li><strong>布尔型</strong>：<code>boolean</code> (理论上占1位，但具体大小取决于JVM实现)</li>
</ul>
<h4 id="2-他们的包装类分别是什么？"><a href="#2-他们的包装类分别是什么？" class="headerlink" title="2. 他们的包装类分别是什么？"></a>2. 他们的包装类分别是什么？</h4><p>对应关系如下（注意 <code>int</code> 和 <code>char</code> 的变化）：</p>
<ul>
<li>byte -&gt; <strong>Byte</strong></li>
<li>short -&gt; <strong>Short</strong></li>
<li>int -&gt; <strong>Integer</strong></li>
<li>long -&gt; <strong>Long</strong></li>
<li>float -&gt; <strong>Float</strong></li>
<li>double -&gt; <strong>Double</strong></li>
<li>char -&gt; <strong>Character</strong></li>
<li>boolean -&gt; <strong>Boolean</strong></li>
</ul>
<h4 id="3-ArrayList为什么线程不安全？"><a href="#3-ArrayList为什么线程不安全？" class="headerlink" title="3. ArrayList为什么线程不安全？"></a>3. ArrayList为什么线程不安全？</h4><ul>
<li><strong>没有同步锁</strong>：ArrayList 的源码中，<code>add()</code>、<code>remove()</code> 等核心方法没有加 <code>synchronized</code> 关键字，也没有使用 Lock 锁。</li>
<li><strong>竞态条件</strong>：<ul>
<li><strong>扩容问题</strong>：当多线程同时添加元素且触发扩容时，可能导致数组下标越界或数据丢失。</li>
<li><strong>值覆盖</strong>：<code>elementData[size++] = e</code> 这一步操作不是原子的（分两步：赋值、size自增）。多线程并发下，可能两个线程拿到同一个 size 值，导致一个线程的数据覆盖了另一个线程的数据。</li>
</ul>
</li>
</ul>
<h4 id="4-如果我考虑用一个线程安全的List，应该用什么？"><a href="#4-如果我考虑用一个线程安全的List，应该用什么？" class="headerlink" title="4. 如果我考虑用一个线程安全的List，应该用什么？"></a>4. 如果我考虑用一个线程安全的List，应该用什么？</h4><p>主要有三种选择，推荐第三种：</p>
<ol>
<li><strong>Vector</strong>：老牌类，所有方法都加了 <code>synchronized</code>，效率极低，不推荐使用。</li>
<li><strong>Collections.synchronizedList(new ArrayList&lt;&gt;())</strong>：使用工具类将 ArrayList 包装成线程安全的，本质是在操作时加互斥锁，性能一般。</li>
<li><strong>CopyOnWriteArrayList</strong>（<strong>推荐</strong>）：<ul>
<li><strong>原理</strong>：写时复制（COW）。在进行写操作（add&#x2F;set）时，不直接修改原数组，而是复制一个新的数组进行修改，修改完后将引用指向新数组。</li>
<li><strong>场景</strong>：读多写少的并发场景，读取时无锁，性能很高。</li>
</ul>
</li>
</ol>
<h4 id="5-介绍下IoC和AOP"><a href="#5-介绍下IoC和AOP" class="headerlink" title="5. 介绍下IoC和AOP"></a>5. 介绍下IoC和AOP</h4><p>这是 Spring 的两大核心思想：</p>
<ul>
<li><strong>IoC (Inversion of Control) 控制反转</strong>：<ul>
<li><strong>概念</strong>：将对象的创建、管理和依赖关系的维护权，从代码中移除，交给 Spring 容器（Bean工厂）来管理。</li>
<li><strong>实现</strong>：主要通过 <strong>DI (Dependency Injection) 依赖注入</strong> 来实现（如 <code>@Autowired</code>）。</li>
<li><strong>好处</strong>：解耦，降低了类与类之间的耦合度。</li>
</ul>
</li>
<li><strong>AOP (Aspect Oriented Programming) 面向切面编程</strong>：<ul>
<li><strong>概念</strong>：将那些与业务无关，但多个业务模块都要调用的逻辑（如日志记录、事务管理、权限校验）封装起来，通过动态代理的方式插入到业务代码中。</li>
<li><strong>实现</strong>：基于 JDK 动态代理（接口）或 CGLIB（类继承）。</li>
<li><strong>好处</strong>：减少重复代码，专注于核心业务逻辑。</li>
</ul>
</li>
</ul>
<h4 id="6-SpringCloud了解吗？"><a href="#6-SpringCloud了解吗？" class="headerlink" title="6. SpringCloud了解吗？"></a>6. SpringCloud了解吗？</h4><p>（如果简历写了微服务必问，没写可以说了解概念）<br>Spring Cloud 是基于 Spring Boot 的微服务架构一站式解决方案。常见的组件（以 Spring Cloud Alibaba 为例）：</p>
<ul>
<li><strong>注册中心</strong>：Nacos &#x2F; Eureka（服务发现与注册）。</li>
<li><strong>配置中心</strong>：Nacos Config &#x2F; Spring Cloud Config（统一管理配置）。</li>
<li><strong>负载均衡</strong>：Ribbon &#x2F; Spring Cloud LoadBalancer。</li>
<li><strong>服务调用</strong>：OpenFeign（声明式 HTTP 客户端）。</li>
<li><strong>服务熔断&#x2F;降级</strong>：Sentinel &#x2F; Hystrix（防止雪崩效应）。</li>
<li><strong>网关</strong>：Spring Cloud Gateway（统一入口、鉴权、限流）。</li>
</ul>
<h4 id="7-Linux会吗，怎么查日志？"><a href="#7-Linux会吗，怎么查日志？" class="headerlink" title="7. Linux会吗，怎么查日志？"></a>7. Linux会吗，怎么查日志？</h4><ul>
<li><strong><code>tail -f filename.log</code></strong>：实时监控日志文件的末尾输出（最常用，看正在报错的信息）。</li>
<li><strong><code>grep &quot;关键字&quot; filename.log</code></strong>：根据关键字搜索日志（如搜索 “Exception” 或 “订单号”）。<ul>
<li>组合拳：<code>grep -C 10 &quot;Error&quot; app.log</code> （显示关键字前后10行）。</li>
</ul>
</li>
<li><strong><code>less filename.log</code></strong>：分页查看大文件（支持 <code>/</code> 向下搜索，<code>?</code> 向上搜索）。</li>
<li><strong><code>cat</code></strong>：查看小文件内容。</li>
</ul>
<h4 id="8-了解Redis的Hash吗，有什么用？"><a href="#8-了解Redis的Hash吗，有什么用？" class="headerlink" title="8. 了解Redis的Hash吗，有什么用？"></a>8. 了解Redis的Hash吗，有什么用？</h4><ul>
<li><strong>结构</strong>：类似于 Java 的 <code>HashMap&lt;String, HashMap&lt;String, String&gt;&gt;</code>，即 Key -&gt; (Field -&gt; Value)。</li>
<li><strong>用途</strong>：<ul>
<li><strong>存储对象</strong>：非常适合存储用户信息、商品详情等。例如 Key&#x3D;<code>user:1001</code>，Field&#x3D;<code>name</code> Value&#x3D;<code>Tom</code>，Field&#x3D;<code>age</code> Value&#x3D;<code>18</code>。</li>
<li><strong>优势</strong>：相比于 String 类型存储 JSON 字符串，Hash 可以<strong>单独修改</strong>对象的某个字段（如只改价格），而不需要序列化和反序列化整个对象，节省网络流量和内存。</li>
<li><strong>购物车</strong>：Key&#x3D;用户ID，Field&#x3D;商品ID，Value&#x3D;数量。</li>
</ul>
</li>
</ul>
<h4 id="9-编写MySQL语句的时候要遵循什么规范？"><a href="#9-编写MySQL语句的时候要遵循什么规范？" class="headerlink" title="9. 编写MySQL语句的时候要遵循什么规范？"></a>9. 编写MySQL语句的时候要遵循什么规范？</h4><ul>
<li><strong>避免 <code>SELECT *</code></strong>：按需查询字段，减少网络传输和回表操作，能利用覆盖索引最好。</li>
<li><strong>索引失效避坑</strong>：<ul>
<li>遵循<strong>最左前缀法则</strong>。</li>
<li>不在索引列上做运算（如 <code>WHERE year(create_time) = 2024</code>）。</li>
<li>避免使用 <code>!=</code> 或 <code>&lt;&gt;</code>。</li>
<li><code>LIKE</code> 查询不要以 <code>%</code> 开头。</li>
</ul>
</li>
<li><strong>分页优化</strong>：大数据量分页时，避免直接 <code>LIMIT 1000000, 10</code>，可以使用 <code>WHERE id &gt; 上一次最大ID LIMIT 10</code>。</li>
<li><strong>关键字大写</strong>：保持良好的 SQL 风格。</li>
</ul>
<hr>
<h3 id="第二部分：项目相关"><a href="#第二部分：项目相关" class="headerlink" title="第二部分：项目相关"></a>第二部分：项目相关</h3><h4 id="1-你登陆用户的Token如何设计的？"><a href="#1-你登陆用户的Token如何设计的？" class="headerlink" title="1. 你登陆用户的Token如何设计的？"></a>1. 你登陆用户的Token如何设计的？</h4><p>通常采用 <strong>JWT (JSON Web Token)</strong> 标准。</p>
<ul>
<li><strong>结构</strong>：Token 分为三部分：Header（头）、Payload（载荷，存 userId、过期时间等非敏感信息）、Signature（签名，防篡改）。</li>
<li><strong>流程</strong>：<ol>
<li>用户登录成功，服务端生成 JWT，包含 userId 和过期时间。</li>
<li>服务端返回 Token 给前端，前端存储在 LocalStorage 或 Cookie 中。</li>
<li>后续请求在 Header (<code>Authorization: Bearer &lt;token&gt;</code>) 中携带。</li>
<li>服务端校验签名是否正确、是否过期。</li>
</ol>
</li>
<li><strong>双Token方案（进阶）</strong>：设计 Access Token（短效，用于访问）和 Refresh Token（长效，用于刷新），提高安全性。</li>
</ul>
<h4 id="2-MyBatisPlus底层原理"><a href="#2-MyBatisPlus底层原理" class="headerlink" title="2. MyBatisPlus底层原理"></a>2. MyBatisPlus底层原理</h4><p>MyBatisPlus (MP) 本质上是 MyBatis 的<strong>增强工具</strong>，只做增强不做改变。</p>
<ul>
<li><strong>启动阶段</strong>：MP 会扫描实体类（Entity），根据注解（如 <code>@TableName</code>, <code>@TableId</code>）和反射机制，获取表名、字段名。</li>
<li><strong>SQL注入器 (ISqlInjector)</strong>：MP 内部有一个 <code>DefaultSqlInjector</code>，它预定义了通用的 CRUD SQL 模板（如 <code>selectById</code>, <code>insert</code>）。</li>
<li><strong>MappedStatement 注入</strong>：在启动时，MP 自动将生成的 SQL 语句注入到 MyBatis 的 Configuration 对象中。</li>
<li><strong>运行时</strong>：调用 Mapper 接口方法时，直接找到对应的 SQL 执行，无需手写 XML。</li>
<li><strong>插件机制</strong>：通过拦截器（Interceptor）实现分页、乐观锁、多租户等功能。</li>
</ul>
<h4 id="3-Cache-Aside（旁路缓存）为什么能保证数据一致性？"><a href="#3-Cache-Aside（旁路缓存）为什么能保证数据一致性？" class="headerlink" title="3. Cache Aside（旁路缓存）为什么能保证数据一致性？"></a>3. Cache Aside（旁路缓存）为什么能保证数据一致性？</h4><p>Cache Aside 是最常用的缓存读写策略。</p>
<ul>
<li><strong>读策略</strong>：先读缓存 -&gt; 命中返回；未命中读数据库 -&gt; 写入缓存 -&gt; 返回。</li>
<li><strong>写策略</strong>：<strong>先更新数据库，再删除缓存</strong>。</li>
<li><strong>为什么是删除而不是更新缓存？</strong><ul>
<li><strong>避免脏数据</strong>：如果是更新缓存，在并发写的情况下，可能出现“线程A改DB -&gt; 线程B改DB -&gt; 线程B改缓存 -&gt; 线程A改缓存”，导致缓存存的是旧值（脏数据）。</li>
<li><strong>懒加载</strong>：删除缓存后，下一次读取时才会去计算并放入缓存，避免频繁更新缓存但没人读的情况，节省性能。</li>
</ul>
</li>
<li><strong>一致性保证</strong>：<ul>
<li>它保证的是<strong>最终一致性</strong>，而非强一致性。</li>
<li><strong>极端情况</strong>：DB更新成功，缓存删除失败。解决方案是利用<strong>消息队列重试机制</strong>来删除缓存，或者使用<strong>Canal</strong>监听 Binlog 异步删除缓存。</li>
<li><strong>延时双删</strong>：为了防止在“读写并发”时，旧数据被读线程重新写入缓存，可以在删除缓存后，休眠一小段时间再次删除。</li>
</ul>
</li>
</ul>

    </div>
    
    
    
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2025 UNCEIR的个人博客
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;David Huang
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
    




    
</body>
</html>
